<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exerc√≠cios de Inform√°tica</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <header>
        <h1>Exerc√≠cios de Inform√°tica</h1>
        <p>Pratique e teste seus conhecimentos!</p>
        <nav>
            <a href="index.html">üè† In√≠cio</a>
            <a href="exercicios.html?categoria=windows">üñ• Windows</a>
            <a href="exercicios.html?categoria=word">üìù Word</a>
            <a href="exercicios.html?categoria=excel">üìä Excel</a>
        </nav>
    </header>

    <main>
        <h2 id="titulo-categoria">Carregando...</h2>

        <!-- Menu com n√∫meros das quest√µes -->
        <div id="menu-questoes">
            <!-- Os n√∫meros das quest√µes ser√£o carregados dinamicamente aqui -->
        </div>

        <!-- Quest√µes ser√£o exibidas aqui -->
        <div id="exercicios">
            <!-- As perguntas ser√£o carregadas dinamicamente aqui -->
        </div>
    </main>

    <script src="assets/js/loadQuestions.js"></script>
    <script>
        async function carregarPerguntas(categoria) {
            try {
                // Carrega os dados do arquivo JSON
                let resposta = await fetch("dados/perguntas.json");
                let dados = await resposta.json();

                let perguntas = dados[categoria] || [];
                let container = document.getElementById("exercicios");
                let menu = document.getElementById("menu-questoes");
                let tituloCategoria = document.getElementById("titulo-categoria");

                tituloCategoria.textContent = `Exerc√≠cios de ${categoria.charAt(0).toUpperCase() + categoria.slice(1)}`;

                container.innerHTML = "";
                menu.innerHTML = "";

                perguntas.forEach((questao, index) => {
                    // Adiciona um bot√£o no menu com o n√∫mero da quest√£o
                    let menuItem = document.createElement("button");
                    menuItem.textContent = index + 1;
                    menuItem.classList.add("menu-item");
                    menuItem.setAttribute("data-index", index);
                    menuItem.addEventListener("click", () => mostrarQuestao(index));

                    menu.appendChild(menuItem);

                    // Cria cada quest√£o, mas deixa todas ocultas inicialmente
                    let div = document.createElement("div");
                    div.classList.add("pergunta");
                    div.classList.add("ocultar");
                    div.setAttribute("data-index", index);

                    let html = `<h3>${index + 1}. ${questao.pergunta}</h3><ul>`;
                    questao.alternativas.forEach((alt, i) => {
                        html += `<li><button class="opcao" data-escolhida="${i}" data-correta="${parseInt(questao.correta)}">${alt}</button></li>`;
                    });
                    html += `</ul><p class="resposta"></p>`;

                    div.innerHTML = html;
                    container.appendChild(div);

                    // Adiciona o evento de clique para verificar a resposta
                    document.querySelectorAll(".opcao").forEach(botao => {
                        botao.addEventListener("click", function () {
                            verificarResposta(this, parseInt(this.dataset.escolhida), parseInt(this.dataset.correta));
                        });
                    });
                });

                // Exibe a primeira quest√£o por padr√£o
                mostrarQuestao(0);

            } catch (erro) {
                console.error("Erro ao carregar perguntas:", erro);
            }
        }

        // Fun√ß√£o para mostrar a quest√£o
        function mostrarQuestao(index) {
            // Esconde todas as quest√µes
            document.querySelectorAll(".pergunta").forEach(questao => {
                questao.classList.add("ocultar");
            });

            // Exibe a quest√£o correspondente
            let questaoVisivel = document.querySelector(`.pergunta[data-index="${index}"]`);
            if (questaoVisivel) {
                questaoVisivel.classList.remove("ocultar");
            }

            // Marca o menu
            document.querySelectorAll(".menu-item").forEach(item => {
                item.classList.remove("ativo");
            });
            let menuItemAtivo = document.querySelector(`.menu-item[data-index="${index}"]`);
            if (menuItemAtivo) {
                menuItemAtivo.classList.add("ativo");
            }
        }

        // Fun√ß√£o para verificar se a resposta est√° correta
        function verificarResposta(botao, escolhida, correta) {
            let resposta = botao.closest(".pergunta").querySelector(".resposta");

            if (escolhida === correta) {
                resposta.textContent = "‚úÖ Resposta correta!";
                resposta.style.color = "green";
            } else {
                resposta.textContent = "‚ùå Resposta errada! Tente novamente.";
                resposta.style.color = "red";
            }
        }

        // Obt√©m a categoria da URL e carrega os exerc√≠cios
        const urlParams = new URLSearchParams(window.location.search);
        const categoria = urlParams.get("categoria") || "windows";
        carregarPerguntas(categoria);
        
    </script>
</body>

</html>
